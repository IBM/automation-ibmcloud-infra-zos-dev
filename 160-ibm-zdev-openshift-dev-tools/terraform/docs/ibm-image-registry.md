# IBM Image Registry module

Module to set up a namespace in the IBM Container Registry and configure the cluster


## Software dependencies

The module depends on the following software components:

### Terraform version

- \>= v0.15

### Terraform providers


None

### Module dependencies


- cluster - one of:
    - [github.com/cloud-native-toolkit/terraform-ibm-container-platform](https://github.com/cloud-native-toolkit/terraform-ibm-container-platform) (>= 1.7.0)
    - [github.com/cloud-native-toolkit/terraform-ibm-ocp-vpc](https://github.com/cloud-native-toolkit/terraform-ibm-ocp-vpc) (>= 1.0.0)
    - [github.com/cloud-native-toolkit/terraform-k8s-ocp-cluster](https://github.com/cloud-native-toolkit/terraform-k8s-ocp-cluster) (>= 2.0.0)
- namespace - [github.com/cloud-native-toolkit/terraform-k8s-namespace](https://github.com/cloud-native-toolkit/terraform-k8s-namespace) (>= 2.1.0)
- resource_group - [github.com/cloud-native-toolkit/terraform-ibm-resource-group](https://github.com/cloud-native-toolkit/terraform-ibm-resource-group) (>= 2.1.0)

## Example usage

```hcl
module "registry" {
  source = "github.com/terraform-ibm-modules/terraform-ibm-toolkit-image-registry"

  cluster_namespace = module.openshift-gitops.name
  cluster_type_code = module.cluster.platform.type_code
  config_file_path = module.cluster.config_file_path
  gitops_dir = var.gitops_dir
  ibmcloud_api_key = var.ibmcloud_api_key
  private_endpoint = var.private_endpoint
  region = var.region
  registry_namespace = var.registry_namespace
  resource_group_name = module.resource_group.name
}

```

## Module details

### Inputs

| Name | Description | Required | Default | Source |
|------|-------------|---------|----------|--------|
| resource_group_name | The name of the IBM Cloud resource group where the cluster will be created/can be found. | true |  | resource_group.name |
| registry_namespace | The namespace that will be created in the IBM Cloud image registry. If not provided the value will default to the resource group | true |  |  |
| registry_user | The username to authenticate to the IBM Container Registry | false | iamapikey |  |
| registry_password | The password (API key) to authenticate to the IBM Container Registry. If not provided the value will default to `var.ibmcloud_api_key` | true |  |  |
| region | The region for the image registry been installed. | true |  |  |
| config_file_path | The path to the kube config | true |  | cluster.config_file_path |
| ibmcloud_api_key | The IBM Cloud api token | true |  |  |
| cluster_namespace | The namespace in the cluster where the configuration should be created (e.g. tools) | true |  | namespace.name |
| gitops_dir | The directory where the gitops configuration should be stored | true |  |  |
| cluster_type_code | The cluster_type of the cluster | false | ocp4 | cluster.platform.type_code |
| apply | Flag indicating that the module should be applied | false | true |  |
| private_endpoint | Flag indicating that the registry url should be created with private endpoints | false | true |  |

### Outputs


None

## Resources

- [Documentation](https://operate.cloudnativetoolkit.dev)
- [Module catalog](https://modules.cloudnativetoolkit.dev)

> License: Apache License 2.0 | Generated by iascable (3.0.1)
