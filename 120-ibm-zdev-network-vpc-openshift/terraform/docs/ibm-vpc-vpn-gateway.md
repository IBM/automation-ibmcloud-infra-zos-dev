# VPC VPN Gateway module

Module to provision a VPN Gateway within a Virtual Private Cloud instance


## Software dependencies

The module depends on the following software components:

### Terraform version

- \>= v0.15

### Terraform providers


- ibm (ibm-cloud/ibm)

### Module dependencies


- resource_group - [github.com/cloud-native-toolkit/terraform-ibm-resource-group](https://github.com/cloud-native-toolkit/terraform-ibm-resource-group) (>= 2.1.0)
- subnets - [github.com/cloud-native-toolkit/terraform-ibm-vpc-subnets](https://github.com/cloud-native-toolkit/terraform-ibm-vpc-subnets) (>= 1.8.0)

## Example usage

```hcl
module "ibm-vpc-vpn-gateway" {
  source = "github.com/terraform-ibm-modules/terraform-ibm-toolkit-vpn-gateway"

  ibmcloud_api_key = var.ibmcloud_api_key
  label = var.ibm-vpc-vpn-gateway_label
  mode = var.ibm-vpc-vpn-gateway_mode
  provision = var.ibm-vpc-vpn-gateway_provision
  region = var.region
  resource_group_id = module.resource_group.id
  tags = var.ibm-vpc-vpn-gateway_tags == null ? null : jsondecode(var.ibm-vpc-vpn-gateway_tags)
  vpc_name = module.ingress-subnets.vpc_name
  vpc_subnet_count = module.ingress-subnets.count
  vpc_subnets = module.ingress-subnets.subnets
}

```

## Module details

### Inputs

| Name | Description | Required | Default | Source |
|------|-------------|---------|----------|--------|
| resource_group_id | The id of the IBM Cloud resource group where the VPC has been provisioned. | true |  | resource_group.id |
| region | The IBM Cloud region where the cluster will be/has been installed. | true |  |  |
| ibmcloud_api_key | The IBM Cloud api token | true |  |  |
| vpc_name | The name of the vpc instance | true |  | subnets.vpc_name |
| label | The label for the server instance | false | vpn |  |
| vpc_subnet_count | Number of vpc subnets | true |  | subnets.count |
| vpc_subnets | List of subnets with labels | true |  | subnets.subnets |
| mode | The optional mode of operation for the VPN gateway. Valid values are route or policy | false | null |  |
| tags | List of tags for the resource | false |  |  |
| provision | Flag indicating that the resource should be provisioned. If false the resource will be looked up. | false | true |  |

### Outputs

| Name | Description |
|------|-------------|
| ids | The ids of the gateways that were created |
| crns | The crns of the gateways that were created |
| count | The number of gateways that were created |
| provision | The flag indicating that the gateway was provisioned |

## Resources

- [Documentation](https://operate.cloudnativetoolkit.dev)
- [Module catalog](https://modules.cloudnativetoolkit.dev)

> License: Apache License 2.0 | Generated by iascable (3.0.1)
