# IBM VPC Subnets module

Module to provision a collection of subnets for an existing VPC


## Software dependencies

The module depends on the following software components:

### Terraform version

- \>= v0.15

### Terraform providers


- ibm (ibm-cloud/ibm)

### Module dependencies


- resource-group - [github.com/terraform-ibm-modules/terraform-ibm-toolkit-resource-group](https://github.com/terraform-ibm-modules/terraform-ibm-toolkit-resource-group) (>= 1.0.0)
- vpc - [github.com/terraform-ibm-modules/terraform-ibm-toolkit-vpc](https://github.com/terraform-ibm-modules/terraform-ibm-toolkit-vpc) (>= 1.0.0)
- gateways - [github.com/terraform-ibm-modules/terraform-ibm-toolkit-vpc-gateways](https://github.com/terraform-ibm-modules/terraform-ibm-toolkit-vpc-gateways) (>= 0.0.0)

## Example usage

```hcl
module "vpe-subnets" {
  source = "cloud-native-toolkit/vpc-subnets/ibm"


  _count = var.vpe-subnets__count
  acl_rules = var.vpe-subnets_acl_rules == null ? null : jsondecode(var.vpe-subnets_acl_rules)
  common_tags = var.common_tags == null ? null : jsondecode(var.common_tags)
  gateways = module.ibm-vpc-gateways.gateways
  ipv4_address_count = var.vpe-subnets_ipv4_address_count
  ipv4_cidr_blocks = var.vpe-subnets_ipv4_cidr_blocks == null ? null : jsondecode(var.vpe-subnets_ipv4_cidr_blocks)
  label = var.vpe-subnets_label
  provision = var.vpe-subnets_provision
  region = var.region
  resource_group_name = module.resource_group.name
  tags = var.vpe-subnets_tags == null ? null : jsondecode(var.vpe-subnets_tags)
  vpc_name = module.ibm-vpc.name
  zone_offset = var.vpe-subnets_zone_offset
}

```

## Module details

### Inputs

| Name | Description | Required | Default | Source |
|------|-------------|---------|----------|--------|
| resource_group_name | The name of the IBM Cloud resource group where the VPC has been provisioned. | true |  | resource-group.name |
| region | The IBM Cloud region where the cluster will be/has been installed. | true |  |  |
| vpc_name | The name of the vpc instance | true |  | vpc.name |
| zone_offset | The offset for the zone where the subnet should be created. The default offset is 0 which means the first subnet should be created in zone xxx-1 | false | 0 |  |
| _count | The number of subnets that should be provisioned | false | 3 |  |
| label | Label for the subnets created | false | default |  |
| gateways | List of gateway ids and zones | false | [] | gateways.gateways |
| ipv4_cidr_blocks | List of ipv4 cidr blocks for the subnets that will be created (e.g. ['10.10.10.0/24']). If you are providing cidr blocks then a value must be provided for each of the subnets. If you don't provide cidr blocks for each of the subnets then values will be generated using the {ipv4_address_count} value. | false |  |  |
| ipv4_address_count | The size of the ipv4 cidr block that should be allocated to the subnet. If {ipv4_cidr_blocks} are provided then this value is ignored. | false | 256 |  |
| provision | Flag indicating that the subnet should be provisioned. If 'false' then the subnet will be looked up. | false | true |  |
| acl_rules | List of rules to set on the subnet access control list | false | [] |  |
| tags | Tags that should be added to the instance | false |  |  |
| common_tags | Common tags that should be added to the instance | false |  |  |

### Outputs

| Name | Description |
|------|-------------|
| count | The number of subnets created |
| ids | The ids of the created subnets |
| names | The ids of the created subnets |
| subnets | The subnets that were created |
| acl_id | The id of the network acl for the subnets |
| vpc_name | The name of the VPC where the subnets were provisioned |
| vpc_id | The id of the VPC where the subnets were provisioned |

## Resources

- [Documentation](https://operate.cloudnativetoolkit.dev)
- [Module catalog](https://modules.cloudnativetoolkit.dev)

> License: Apache License 2.0 | Generated by iascable (3.2.0)
