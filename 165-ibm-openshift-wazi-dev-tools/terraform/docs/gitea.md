# Gitea module

Module to install Gitea into a cluster via an operator


## Software dependencies

The module depends on the following software components:

### Terraform version

- \>= v0.15

### Terraform providers


- clis (cloud-native-toolkit/clis)

### Module dependencies


- cluster - interface github.com/cloud-native-toolkit/automation-modules#cluster
- olm - [github.com/cloud-native-toolkit/terraform-k8s-olm](https://github.com/cloud-native-toolkit/terraform-k8s-olm) (>= 1.2.2)
- namespace - [github.com/cloud-native-toolkit/terraform-k8s-namespace](https://github.com/cloud-native-toolkit/terraform-k8s-namespace) (>= 2.1.0)

## Example usage

```hcl
module "gitea" {
  source = "github.com/cloud-native-toolkit/terraform-tools-gitea"

  ca_cert = module.cluster.ca_cert
  ca_cert_file = var.gitea_ca_cert_file
  cluster_config_file = module.cluster.config_file_path
  cluster_type = module.cluster.platform.type_code
  instance_name = var.gitea_instance_name
  instance_namespace = module.gitea_namespace.name
  olm_namespace = module.olm.olm_namespace
  operator_namespace = module.olm.target_namespace
  password = var.gitea_password
  username = var.gitea_username
}

```

## Module details

### Inputs

| Name | Description | Required | Default | Source |
|------|-------------|---------|----------|--------|
| cluster_config_file | Cluster config file for Kubernetes cluster. | true |  | cluster.config_file_path |
| cluster_type | The type of cluster (openshift or kubernetes) | false | ocp4 | cluster.platform.type_code |
| olm_namespace | Namespace where olm is installed | false | openshift-marketplace | olm.olm_namespace |
| operator_namespace | Namespace where operators will be installed | false | openshift-operators | olm.target_namespace |
| instance_namespace | Namespace where instance will be installed | false | tools | namespace.name |
| instance_name | The name for the instance | false | gitea |  |
| username | The username for the instance | false | gitea-admin |  |
| password | The password for the instance | true |  |  |
| ca_cert | The base64 encoded ca certificate | true |  | cluster.ca_cert |
| ca_cert_file | The path to the file that contains the ca certificate | true |  |  |

### Outputs

| Name | Description |
|------|-------------|
| namespace | The namespace where the Gitea instance has been provisioned |
| username | The username of the Gitea admin user |
| password | The password of the Gitea admin user |
| token | The api token of the Gitea admin user |
| host | The host name of the gitea server |
| org | The host name of the gitea server |
| ingress_host | The host name of the gitea server |
| ingress_url | The url of the gitea server |
| ca_cert | Base64 encoded CA certificate for cluster endpoints |

## Resources

- [Documentation](https://operate.cloudnativetoolkit.dev)
- [Module catalog](https://modules.cloudnativetoolkit.dev)

> License: Apache License 2.0 | Generated by iascable (3.2.0)
