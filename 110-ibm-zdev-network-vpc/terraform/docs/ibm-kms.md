# IBM KMS module

Module to provision Key Protect


## Software dependencies

The module depends on the following software components:

### Terraform version

- \>= v0.15

### Terraform providers


- ibm (ibm-cloud/ibm)

### Module dependencies


- resource_group - [github.com/cloud-native-toolkit/terraform-ibm-resource-group](https://github.com/cloud-native-toolkit/terraform-ibm-resource-group) (>= 2.1.0)

## Example usage

```hcl
module "kms" {
  source = "github.com/terraform-ibm-modules/terraform-ibm-toolkit-kms"

  name = var.kms_name
  name_prefix = var.kms_name_prefix
  number_of_crypto_units = var.kms_number_of_crypto_units
  private_endpoint = var.private_endpoint
  provision = var.kms_provision
  region = var.kms_region
  resource_group_name = module.kms_resource_group.name
  service = var.kms_service
  tags = var.kms_tags == null ? null : jsondecode(var.kms_tags)
}

```

## Module details

### Inputs

| Name | Description | Required | Default | Source |
|------|-------------|---------|----------|--------|
| resource_group_name | Resource group where the cluster has been provisioned. | true |  | resource_group.name |
| region | Geographic location of the resource (e.g. us-south, us-east) | true |  |  |
| tags | Tags that should be applied to the service | false |  |  |
| name_prefix | The prefix name for the service. If not provided it will default to the resource group name | true |  |  |
| provision | Flag indicating that key-protect instance should be provisioned | false | true |  |
| name | The name that should be used for the service, particularly when connecting to an existing service. If not provided then the name will be defaulted to {name prefix}-{service} | true |  |  |
| private_endpoint | Flag indicating that the service should be created with private endpoints | false | true |  |
| number_of_crypto_units | No of crypto units that has to be attached to the instance. | false | 2 |  |
| service | The name of the KMS provider that should be used (keyprotect or hpcs) | false | keyprotect |  |

### Outputs

| Name | Description |
|------|-------------|
| id | The id of the provisioned instance. |
| guid | The id of the provisioned instance. |
| name | The name of the provisioned instance. |
| crn | The id of the provisioned instance |
| location | The location of the provisioned instance |
| service | The service name of the key provisioned for the instance |
| label | The label for the instance |
| type | The type of the resource |
| public_url | The public endpoint for the resource |
| private_url | The private endpoint for the resource |

## Resources

- [Documentation](https://operate.cloudnativetoolkit.dev)
- [Module catalog](https://modules.cloudnativetoolkit.dev)

> License: Apache License 2.0 | Generated by iascable (3.0.1)
