# VPE Gateway module

Provisions a Virtual Private Gateway for a provided resource, connecting that resource to the provided subnet


## Software dependencies

The module depends on the following software components:

### Terraform version

- \>= v0.15

### Terraform providers


- ibm (ibm-cloud/ibm)

### Module dependencies


- resource_group - [github.com/cloud-native-toolkit/terraform-ibm-resource-group](https://github.com/cloud-native-toolkit/terraform-ibm-resource-group) (>= 1.0.0)
- subnets - [github.com/cloud-native-toolkit/terraform-ibm-vpc-subnets](https://github.com/cloud-native-toolkit/terraform-ibm-vpc-subnets) (>= 1.8.0)
- resource - interface github.com/cloud-native-toolkit/automation-modules#ibm-service
- sync - interface github.com/cloud-native-toolkit/automation-modules#sync

## Example usage

```hcl
module "vpe-cos" {
  source = "github.com/terraform-ibm-modules/terraform-ibm-toolkit-vpe-gateway"

  ibmcloud_api_key = var.ibmcloud_api_key
  name_prefix = var.name_prefix
  region = var.region
  resource_crn = module.cos.crn
  resource_group_name = module.resource_group.name
  resource_label = module.cos.label
  resource_service = module.cos.service
  sync = module.resource_group.sync
  vpc_id = module.vpe-subnets.vpc_id
  vpc_subnet_count = module.vpe-subnets.count
  vpc_subnets = module.vpe-subnets.subnets
}

```

## Module details

### Inputs

| Name | Description | Required | Default | Source |
|------|-------------|---------|----------|--------|
| resource_group_name | The name of the IBM Cloud resource group where the VPC gateways will be created. | true |  | resource_group.name |
| region | The IBM Cloud region where the cluster will be/has been installed. | true |  |  |
| ibmcloud_api_key | The IBM Cloud api token | true |  |  |
| name_prefix | The name of the vpc resource | true |  |  |
| vpc_id | The id of the vpc instance | true |  | subnets.vpc_id |
| vpc_subnet_count | Number of vpc subnets | true |  | subnets.count |
| vpc_subnets | List of subnets with labels | true |  | subnets.subnets |
| resource_label | The label for the resource to which the vpe will be connected. Used as a tag and as part of the vpe name. | true |  | resource.label |
| resource_crn | The crn of the resource to which the vpe will be connected. | true |  | resource.crn |
| resource_service | The endpoint gateway target resource type. Values can be provider_cloud_service, provider_infrastructure_service, ?. | true |  | resource.service |
| sync | Value used to synchronize dependencies between modules | true |  | sync.sync |

### Outputs

| Name | Description |
|------|-------------|
| id | The id of the created VPE gateway |
| sync | Value used to synchronize downstream modules |

## Resources

- [Documentation](https://operate.cloudnativetoolkit.dev)
- [Module catalog](https://modules.cloudnativetoolkit.dev)

> License: Apache License 2.0 | Generated by iascable (3.2.0)
